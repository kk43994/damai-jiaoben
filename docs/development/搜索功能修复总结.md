# æœç´¢åŠŸèƒ½ä¿®å¤æ€»ç»“

## ğŸ” é—®é¢˜æ ¹æº

æ ¹æ®ç”¨æˆ·æä¾›çš„å­¦ä¹ æ–‡ä»¶ `learn_complete_flow.py` å’Œåæ ‡é…ç½® `coordinate_manager.py`ï¼š

**é”™è¯¯çš„åšæ³•**ï¼š
- ç‚¹å‡»å³è¾¹çš„"æœç´¢"æŒ‰é’® âŒ
- ç‚¹å‡»è½®æ’­åŒºåŸŸçš„ViewFlipper âŒ

**æ­£ç¡®çš„åšæ³•**ï¼š
- ç‚¹å‡»é¦–é¡µæœç´¢å…¥å£çš„å›ºå®šåæ ‡ âœ…

## ğŸ“ æ­£ç¡®çš„åæ ‡ç‚¹ä½

æ ¹æ®ç”¨æˆ·æä¾›çš„ä»£ç ï¼š

### 1. learn_complete_flow.py (ç¬¬117è¡Œ)
```python
driver.tap([(270, 110)])  # æœç´¢æ¡†ä½ç½®
```

### 2. coordinate_manager.py (ç¬¬56è¡Œ)
```python
"search_entry": [315, 97],  # æœç´¢å…¥å£
```

## ğŸ”§ å·²ä¿®å¤çš„ä»£ç 

### navigation_helper.py ä¿®å¤ç‚¹

**æ–¹å¼1ï¼ˆä¼˜å…ˆï¼‰**: åæ ‡ (270, 110)
```python
self.finder.click_by_coordinate(270, 110)
```

**æ–¹å¼2ï¼ˆå¤‡ç”¨ï¼‰**: åæ ‡ (315, 97)
```python
self.finder.click_by_coordinate(315, 97)
```

**æ–¹å¼3**: é€šè¿‡æ–‡æœ¬æŸ¥æ‰¾
```python
'new UiSelector().textContains("åæ™¨å®‡")'
```

**æ–¹å¼4**: é€šè¿‡resource id
```python
'cn.damai:id/search_box'
```

## ğŸ“Š å®Œæ•´æµç¨‹ï¼ˆå‚è€ƒlearn_complete_flow.pyï¼‰

### æ­¥éª¤1: ç‚¹å‡»æœç´¢å…¥å£
```python
# ä½¿ç”¨åæ ‡ç‚¹å‡»
driver.tap([(270, 110)])
time.sleep(1)
```

### æ­¥éª¤2: ç­‰å¾…è¿›å…¥æœç´¢é¡µé¢
```python
# éªŒè¯æ˜¯å¦è¿›å…¥SearchActivity
current_activity = driver.current_activity
```

### æ­¥éª¤3: æŸ¥æ‰¾è¾“å…¥æ¡†
```python
input_box = driver.find_element(
    AppiumBy.CLASS_NAME,
    'android.widget.EditText'
)
```

### æ­¥éª¤4: è¾“å…¥å…³é”®è¯
```python
input_box.clear()
input_box.send_keys(PERFORMANCE_KEYWORD)
```

### æ­¥éª¤5: æäº¤æœç´¢
```python
# æ–¹æ³•1: æŸ¥æ‰¾æœç´¢æŒ‰é’®
search_btn = driver.find_element(
    AppiumBy.ANDROID_UIAUTOMATOR,
    'new UiSelector().text("æœç´¢")'
)
search_btn.click()

# æ–¹æ³•2: æŒ‰å›è½¦é”®
driver.press_keycode(66)  # KEYCODE_ENTER
```

## ğŸ¯ å…³é”®è¦ç‚¹

1. **ä¸è¦ç‚¹å‡»å³è¾¹çš„"æœç´¢"æŒ‰é’®**
   - resource-id: `cn.damai:id/pioneer_homepage_header_search_btn`
   - bounds: `[575,58][687,118]`
   - è¿™ä¸ªæŒ‰é’®ä¼šç›´æ¥æœç´¢ï¼Œä¸ä¼šå¼¹å‡ºè¾“å…¥æ¡†

2. **åº”è¯¥ç‚¹å‡»æœç´¢å…¥å£åŒºåŸŸ**
   - åæ ‡1: `(270, 110)` - learn_complete_flow.pyæ¨è
   - åæ ‡2: `(315, 97)` - coordinate_manager.pyæ¨è
   - è¿™ä¸ªåŒºåŸŸç‚¹å‡»åä¼šè¿›å…¥æœç´¢é¡µé¢ï¼Œæ˜¾ç¤ºEditTextè¾“å…¥æ¡†

3. **å¿…é¡»ç­‰å¾…è¿›å…¥SearchActivity**
   - ç‚¹å‡»åç­‰å¾…2ç§’
   - æ£€æŸ¥ `current_activity` æ˜¯å¦åŒ…å« "Search"

4. **è¾“å…¥æ¡†åœ¨æœç´¢é¡µé¢æ‰å­˜åœ¨**
   - é¦–é¡µæ²¡æœ‰EditText
   - å¿…é¡»å…ˆè¿›å…¥æœç´¢é¡µé¢

5. **éªŒè¯è¾“å…¥æˆåŠŸ**
   - è¯»å–è¾“å…¥æ¡†çš„textå±æ€§
   - ç¡®è®¤å…³é”®è¯å·²è¾“å…¥

## ğŸ§ª æµ‹è¯•æ­¥éª¤

1. **æ‰‹åŠ¨éªŒè¯åæ ‡**
   ```bash
   python test_search_simple.py
   ```

2. **å®Œæ•´æµç¨‹æµ‹è¯•**
   ```bash
   python test_search_final.py
   ```

3. **GUIæµ‹è¯•**
   ```bash
   python damai_gui_refactored.py
   ```

## ğŸ“± é¡µé¢çŠ¶æ€æ£€æµ‹

æ ¹æ® `damai_smart_ai.py` ä¸­çš„é¡µé¢æ£€æµ‹é€»è¾‘ï¼š

### é¦–é¡µç‰¹å¾
- Activity: `.homepage.MainActivity`
- åº•éƒ¨å¯¼èˆªæ : "é¦–é¡µ"ã€"å‘ç°"ã€"æˆ‘çš„"
- å†…å®¹: "æ¼”å‡º"ã€"ä½“è‚²"ã€"éŸ³ä¹ä¼š"ã€"æ¨è"

### æœç´¢é¡µç‰¹å¾
- Activity: åŒ…å« "Search"
- æœ‰èšç„¦çš„EditText
- æ–‡å­—: "æœç´¢æ¼”å‡º"ã€"æœç´¢åœºé¦†"ã€"å†å²æœç´¢"

### è¯¦æƒ…é¡µç‰¹å¾
- æŒ‰é’®: "ç«‹å³è´­ç¥¨"ã€"ç«‹å³è´­ä¹°"ã€"ç«‹å³é¢„è®¢"
- æ–‡å­—: "æ¼”å‡ºè¯¦æƒ…"

### åœºæ¬¡ç¥¨æ¡£é¡µç‰¹å¾
- åŒæ—¶æœ‰: "åœºæ¬¡" å’Œ "ç¥¨æ¡£"
- æˆ–: "é€‰æ‹©åœºæ¬¡"
- æˆ–: "ç¡®å®š" + ä»·æ ¼ + åœºæ¬¡

## ğŸš€ ä¸‹ä¸€æ­¥

1. âœ… ä¿®å¤æœç´¢å…¥å£ç‚¹å‡»é€»è¾‘
2. âœ… ä½¿ç”¨æ­£ç¡®çš„åæ ‡
3. âœ… æ·»åŠ é¡µé¢åˆ‡æ¢éªŒè¯
4. âœ… ä¼˜åŒ–è¾“å…¥éªŒè¯é€»è¾‘
5. â³ æµ‹è¯•å®Œæ•´æŠ¢ç¥¨æµç¨‹

## ğŸ“ å‚è€ƒæ–‡ä»¶

- `learn_complete_flow.py` - å­¦ä¹ æµç¨‹è„šæœ¬
- `coordinate_manager.py` - åæ ‡ç®¡ç†ç³»ç»Ÿ
- `damai_smart_ai.py` - é¡µé¢çŠ¶æ€æ£€æµ‹
- `navigation_helper.py` - å¯¼èˆªè¾…åŠ©ç±»ï¼ˆå·²ä¿®å¤ï¼‰

---

**ä¿®å¤æ—¶é—´**: 2025-11-16
**ä¿®å¤ç‰ˆæœ¬**: v3.0.1
